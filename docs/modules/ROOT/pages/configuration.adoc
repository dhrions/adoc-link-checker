= Configuration avanc√©e
:page-description: Personnalisez le comportement d'Adoc Link Checker avec des options avanc√©es.
:icons: font
:source-highlighter: pygments

== ‚öôÔ∏è Options de configuration

=== Options globales
[cols="1,2,1,1"]
|===
| Option | Description | Valeur par d√©faut | Exemple

| `--timeout` | Timeout pour les requ√™tes HTTP (secondes). | `15` | `--timeout 30`
| `--max-workers` | Nombre maximal de threads pour le traitement parall√®le. | `5` | `--max-workers 10`
| `--delay` | D√©lai entre chaque requ√™te (secondes). | `0.5` | `--delay 1.0`
| `--output` | Fichier de sortie pour les liens bris√©s (JSON). | `broken_links.json` | `--output rapport.json`
| `--blacklist` | Domaine √† ignorer (peut √™tre sp√©cifi√© plusieurs fois). | `[]` | `--blacklist "spam.com"`
| `--exclude-from` | Fichier contenant la liste des liens √† exclure. | - | `--exclude-from exclude_urls.txt`
| `-v, --verbose` | Augmente la verbosit√© (INFO avec `-v`, DEBUG avec `-vv`). | - | `-vv`
| `--quiet` | D√©sactive les logs sauf les erreurs. | - | `--quiet`
| `--log-file` | Fichier pour enregistrer les logs. | - | `--log-file logs/checker.log`
|===

=== Configuration via variables d‚Äôenvironnement

Vous pouvez d√©finir des valeurs par d√©faut via des variables d‚Äôenvironnement :
[source,bash]
----
export ADOC_LINK_CHECKER_TIMEOUT=20
export ADOC_LINK_CHECKER_MAX_WORKERS=8
adoc-link-checker ./docs  # Utilisera les valeurs ci-dessus
----

=== Fichier de configuration (exp√©rimental)

Cr√©ez un fichier `.adoc-link-checker.yml` dans votre projet :
[source,yaml]
----
timeout: 20
max_workers: 8
blacklist:
  - "spam.com"
  - "ads.example"
exclude_from: "exclude_urls.txt"
output: "rapport.json"
----
*Cette fonctionnalit√© sera impl√©ment√©e dans la v1.1.0.*

== üìù Fichier d‚Äôexclusion

Le fichier `exclude_urls.txt` permet d‚Äôignorer des liens sp√©cifiques. Exemple :
----
# Ignorer les liens de d√©veloppement
https://dev.exemple.com/*
# Ignorer une URL sp√©cifique
https://exemple.com/lien-temporaire
----

=== Syntaxe avanc√©e

- **Jokers** : Utilisez `*` pour ignorer un ensemble d‚ÄôURLs :
----
https://exemple.com/api/*
----
- **Commentaires** : Les lignes commen√ßant par `#` sont ignor√©es.

== üîß Personnalisation des requ√™tes HTTP

=== User-Agent personnalis√©
Par d√©faut, Adoc Link Checker utilise :
----
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36
----
Pour le modifier, utilisez la variable `ADOC_LINK_CHECKER_USER_AGENT` :
[source,bash]
----
export ADOC_LINK_CHECKER_USER_AGENT="MonBot/1.0"
adoc-link-checker ./docs
----

=== Gestion des redirections
Les redirections HTTP (3xx) sont suivies automatiquement. Pour d√©sactiver ce comportement, modifiez le code source (`config.py`) :
[source,python]
----
RETRY_CONFIG = {
    "total": 3,
    "backoff_factor": 1,
    "status_forcelist": [500, 502, 503, 504],
    "redirect": False  # D√©sactive le suivi des redirections
}
----

=== Retries et backoff
La configuration des retries est d√©finie dans `config.py` :
[source,python]
----
RETRY_CONFIG = {
    "total": 3,          # Nombre maximal de retries
    "backoff_factor": 1, # D√©lai entre les retries (exponentiel)
    "status_forcelist": [500, 502, 503, 504]  # Codes HTTP pour lesquels retry
}
----

== üìÅ Structure recommand√©e
